# basketballAnalyzeAgent
本仓库主要用于记录制作篮球分析Agent过程的数据分析，主要考虑的几点：1.设计结构 2.关键实现方式 3.性能指标：（a.token消耗 b.准确率 c.时延）
## 项目目标
通过引入智能体系统，对每一帧球员的坐标数据进行精准解析，提取其运动行为特征，并生成详尽的数据分析报告。进一步基于标准战术模型，对球员的实际动作进行对比分析，判断其战术执行是否规范，为技战术评估与训练优化提供数据支撑。  
## 6.18 version：0.1
<img width="736" alt="截屏2025-06-26 10 51 35" src="https://github.com/user-attachments/assets/0369e16b-9a03-4ccf-9645-1bab4599b68e" />

### 1.设计结构
当前采用的是singleAgent，使用ReAct框架。模型可以使用多个工具包括：1.读取json文件返回球员数据坐标。2.计算球员的速度。 3.计算球员与球员之间的距离。 4.计算球员与篮筐的距离
用户输入prompt给模型，模型依据prompt开始调用工具然后将工具信息传回模型，模型再根据传回内容和之前的信息继续调用工具直至完成用户需求
### 2.关键实现方式
采用的是langchain+langgraph实现
### 3.性能指标
#### a.token消耗
token消耗极大，时常出现token超出120k的情况，导致无法完成进行
<img width="700" alt="截屏2025-06-18 10 56 35" src="https://github.com/user-attachments/assets/ecc723a8-b405-46f8-879d-cfb51da48500" />
<img width="700" alt="截屏2025-06-18 11 02 59" src="https://github.com/user-attachments/assets/76babbd1-ebe4-42b9-87e3-74943d9bc14f" />

图中内容为langsmith捕获的信息，由图中可见为了防止token消耗过大采用每次只读50帧分析，但模型连续调用读取json工具，可见这样的操作的效果并不好。
造成token消耗的原因是模型从json文件读取数据后返回文件内的数据，这就导致模型message中始终带着大量的球员位置数据，由大模型分析后光5帧的数据就需要消耗600tokens因此这种消耗大量token的方式需要更改。
#### b.准确率
当前模型返回的报告内容与使用gpt网页端的4o相比任然差距较大。
#### c.时延
完成一轮生成的时间大概在400～500秒左右

## 6.22 version： 0.2
<img width="822" alt="截屏2025-06-26 10 54 07" src="https://github.com/user-attachments/assets/99d9f0bf-ecc3-46ce-aa01-e661eaca91e3" />
### 1.设计结构
整体框架没有改变，本次更新主要更改的事工具调用，当前我可以调用不同工具生成不同需求的csv文件，包括每个球员的每帧的速度，与篮筐的距离等等。模型可以直接读取这些处理过后的文件
### 2.关键实现方式
采用的是langchain+langgraph实现
### 3.性能指标
a. token消耗
token消耗相较于0.1版本减少了很多
b. 准确率
<img width="700" alt="截屏2025-06-23 18 12 10" src="https://github.com/user-attachments/assets/9ad093d9-1f99-4cab-b86b-fc74a626d726" />
发现模型完全没有数学推理能力，目前想法是给模型手动加一些检测球员跑动的功能，模型可以直接在工具中得出球员跑动的帧数然后将信息返回
c. 时延
200秒左右
### 4.主要问题
模型有时候会少用工具，如何让模型充分利用工具进行分析也是非常重要的问题
### 5.未来改进
1.尝试直接在工具内完成结果分析
2，可以创建一个步骤结构agent，先让模型进行任务分步骤，再传入现在的分析agent模型。
